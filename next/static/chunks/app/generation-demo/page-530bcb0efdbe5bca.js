(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{3291:(e,s,a)=>{Promise.resolve().then(a.bind(a,3545))},3545:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>G});var r=a(5155),t=a(4912),l=a(690),n=a(8207),i=a(2115),c=a(8482),o=a(8145),d=a(1397),x=a(4416),m=a(9946);let u=(0,m.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),h=(0,m.A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var g=a(2138);let p=(0,m.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var v=a(8564),j=a(7951),y=a(9588),b=a(5517),N=a(9803),f=a(5690),w=a(1788),A=a(4671),C=a(4239);function k(e){var s,a;let{isOpen:m=!0,onClose:k,title:V="AI Video Generation Demo"}=e,{openModal:G,closeModal:E}=(0,n.h)(),[I,S]=(0,i.useState)(null),[U,z]=(0,i.useState)(null),[M,P]=(0,i.useState)(null),[_,T]=(0,i.useState)({isGenerating:!1,progress:0,videoUrl:null,error:null}),O=(0,i.useCallback)(e=>{S(e),P(null),z(null),T({isGenerating:!1,progress:0,videoUrl:null,error:null}),E("avatar-selection")},[E]),D=(0,i.useCallback)((e,s)=>{var a;console.log("\uD83C\uDFB5 Audio generation callback called:",{audioUrl:e.substring(0,50)+"...",voice:null==(a=s.selectedVoice)?void 0:a.name}),P(e),z(s),T({isGenerating:!1,progress:0,videoUrl:null,error:null}),E("audio-generation")},[E]),F=(0,i.useCallback)(async()=>{if(I&&M&&(null==U?void 0:U.selectedVoice)){T({isGenerating:!0,progress:0,videoUrl:null,error:null});try{let e=await fetch("/api/heygen/generate-video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarId:I.id,voiceId:U.selectedVoice.id,script:U.script||"Audio content",audioUrl:M})}),s=await e.json();if(!s.success)throw Error(s.error||"Failed to start video generation");T(e=>({...e,progress:10}));let a=setInterval(async()=>{try{let e=await fetch("/api/heygen/video-status?id=".concat(s.data.id)),r=await e.json();if(!r.success)throw Error(r.error||"Failed to check video status");let t=r.data.status;if("processing"===t)T(e=>({...e,progress:Math.min(e.progress+5,85)}));else if("completed"===t)T({isGenerating:!1,progress:100,videoUrl:r.data.video_url,error:null}),clearInterval(a);else if("failed"===t)throw Error(r.data.error_message||"Video generation failed")}catch(e){console.error("Error checking video status:",e),T({isGenerating:!1,progress:0,videoUrl:null,error:e instanceof Error?e.message:"Failed to check video status"}),clearInterval(a)}},3e3);setTimeout(()=>{clearInterval(a),T(e=>e.isGenerating?{...e,isGenerating:!1,error:"Video generation timed out. Please try again."}:e)},3e5)}catch(e){console.error("Error generating video:",e),T({isGenerating:!1,progress:0,videoUrl:null,error:e instanceof Error?e.message:"Failed to generate video"})}}},[I,M,U]);return m?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",onClick:e=>{e.target===e.currentTarget&&k&&k()},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity"}),(0,r.jsx)("div",{className:"relative flex items-center justify-center min-h-full p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col transform transition-all",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-white rounded-t-lg flex-shrink-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"inline-flex items-center space-x-3 bg-gradient-to-r from-purple-100 to-blue-100 rounded-full px-4 py-2 shadow-sm border border-purple-200 mb-2",children:[(0,r.jsx)(l.A,{className:"w-5 h-5 text-purple-600"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:V})]}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create Professional Avatar Videos"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Complete video creation workflow. Click on any section to get started."})]}),k&&(0,r.jsx)("button",{onClick:k,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Close modal",children:(0,r.jsx)(x.A,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[I?(0,r.jsx)(u,{className:"w-5 h-5 text-green-500"}):(0,r.jsx)(h,{className:"w-5 h-5 text-gray-300"}),(0,r.jsx)("span",{className:"font-medium ".concat(I?"text-green-700":"text-gray-500"),children:"Avatar Selected"})]}),(0,r.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[M?(0,r.jsx)(u,{className:"w-5 h-5 text-green-500"}):(0,r.jsx)(h,{className:"w-5 h-5 text-gray-300"}),(0,r.jsx)("span",{className:"font-medium ".concat(M?"text-green-700":"text-gray-500"),children:"Audio Generated"})]}),(0,r.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[_.videoUrl?(0,r.jsx)(u,{className:"w-5 h-5 text-green-500"}):(0,r.jsx)(h,{className:"w-5 h-5 text-gray-300"}),(0,r.jsx)("span",{className:"font-medium ".concat(_.videoUrl?"text-green-700":"text-gray-500"),children:"Video Created"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)(c.Zp,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg ".concat(I?"border-green-200 bg-green-50":"border-gray-200 hover:border-blue-300"),onClick:()=>{G({id:"avatar-selection",component:(0,r.jsx)(A.r,{isOpen:!0,onClose:()=>E("avatar-selection"),onAvatarSelect:O,selectedAvatar:I,title:"Choose Your AI Avatar"}),zIndex:1100})},children:[(0,r.jsxs)(c.aR,{className:"text-center pb-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(I?"bg-green-100":"bg-blue-100"),children:(0,r.jsx)(p,{className:"w-6 h-6 ".concat(I?"text-green-600":"text-blue-600")})})}),(0,r.jsx)(c.ZB,{className:"text-lg",children:I?"Avatar Selected":"Choose Avatar"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:I?"Click to change your selection":"Select your AI presenter"})]}),(0,r.jsx)(c.Wu,{className:"space-y-4",children:I?(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-white border border-green-200 rounded-xl p-3",children:[(0,r.jsx)("img",{src:I.preview_image_url,alt:I.name,className:"w-16 h-16 rounded-full object-cover mx-auto mb-2"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:I.name}),I.featured&&(0,r.jsx)(v.A,{className:"w-3 h-3 text-yellow-500 fill-current"}),I.premium&&(0,r.jsx)(j.A,{className:"w-3 h-3 text-purple-500 fill-current"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-1",children:[I.gender&&(0,r.jsx)(o.E,{variant:"secondary",className:"text-xs",children:I.gender}),I.age&&(0,r.jsx)(o.E,{variant:"secondary",className:"text-xs",children:I.age}),I.ethnicity&&(0,r.jsx)(o.E,{variant:"secondary",className:"text-xs",children:I.ethnicity})]})]})}):(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)(p,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-600 text-xs",children:"Choose from 50+ professional AI avatars"})]})})})]}),(0,r.jsxs)(c.Zp,{className:"transition-all duration-200 hover:shadow-lg ".concat(M?"border-green-200 bg-green-50":I?"border-gray-200 hover:border-purple-300 cursor-pointer":"border-gray-100 bg-gray-50"),onClick:I?()=>{I&&G({id:"audio-generation",component:(0,r.jsx)(C.q,{isOpen:!0,onClose:()=>E("audio-generation"),onAudioGenerated:D,title:"Create Voice Content"}),zIndex:1100})}:void 0,children:[(0,r.jsxs)(c.aR,{className:"text-center pb-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(M?"bg-green-100":I?"bg-purple-100":"bg-gray-100"),children:(0,r.jsx)(y.A,{className:"w-6 h-6 ".concat(M?"text-green-600":I?"text-purple-600":"text-gray-400")})})}),(0,r.jsx)(c.ZB,{className:"text-lg",children:M?"Audio Generated":"Create Audio"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:M?"Click to regenerate audio":I?"Generate voice content":"Select avatar first"})]}),(0,r.jsx)(c.Wu,{className:"space-y-4",children:M&&U?(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-white border border-green-200 rounded-xl p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,r.jsx)(b.A,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 text-sm",children:"Audio Ready"})]}),(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Voice:"}),(0,r.jsx)("span",{className:"font-medium",children:null==(s=U.selectedVoice)?void 0:s.name})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,r.jsx)(o.E,{variant:"secondary",className:"text-xs",children:"text-to-audio"===U.inputMethod?"Text to Speech":"Voice Conversion"})]})]}),(0,r.jsx)("audio",{controls:!0,className:"w-full mt-2",src:M})]})}):I?(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)(y.A,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-600 text-xs",children:"Create professional voice content with premium AI voices"})]})}):(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-gray-100 rounded-xl p-6",children:[(0,r.jsx)(y.A,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-500 text-xs",children:"Select an avatar first to enable audio generation"})]})})})]}),(0,r.jsxs)(c.Zp,{className:"transition-all duration-200 hover:shadow-lg ".concat(_.videoUrl?"border-green-200 bg-green-50":I&&M?"border-gray-200 hover:border-green-300":"border-gray-100 bg-gray-50"),children:[(0,r.jsxs)(c.aR,{className:"text-center pb-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(_.videoUrl||I&&M?"bg-green-100":"bg-gray-100"),children:(0,r.jsx)(N.A,{className:"w-6 h-6 ".concat(_.videoUrl||I&&M?"text-green-600":"text-gray-400")})})}),(0,r.jsx)(c.ZB,{className:"text-lg",children:_.videoUrl?"Video Created":"Generate Video"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:_.videoUrl?"Your video is ready!":I&&M?"Combine avatar and audio":"Complete previous steps first"})]}),(0,r.jsx)(c.Wu,{className:"space-y-4",children:_.videoUrl?(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-white border border-green-200 rounded-xl p-3",children:[(0,r.jsxs)("video",{controls:!0,className:"w-full rounded-lg border border-gray-200 mb-2",poster:null==I?void 0:I.preview_image_url,children:[(0,r.jsx)("source",{src:_.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,r.jsx)(t.$,{variant:"secondary",size:"sm",icon:(0,r.jsx)(f.A,{className:"w-3 h-3"}),onClick:()=>{let e=document.querySelector("video");e&&(e.paused?e.play():e.pause())},children:"Play"}),(0,r.jsx)(t.$,{variant:"primary",size:"sm",icon:(0,r.jsx)(w.A,{className:"w-3 h-3"}),onClick:()=>{let e=document.createElement("a");e.href=_.videoUrl,e.download="avatar-video-".concat(Date.now(),".mp4"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:"Download"})]})]})}):_.isGenerating?(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent mx-auto mb-2"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 text-sm mb-1",children:"Generating Video..."}),(0,r.jsx)(d.k,{value:_.progress,className:"mb-1"}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[_.progress,"% complete"]})]})}):_.error?(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[(0,r.jsx)("p",{className:"text-red-600 font-medium text-sm mb-1",children:"Generation Failed"}),(0,r.jsx)("p",{className:"text-xs text-red-600 mb-2",children:_.error}),(0,r.jsx)(t.$,{variant:"secondary",size:"sm",onClick:F,children:"Try Again"})]})}):I&&M?(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)(N.A,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-600 text-xs mb-2",children:"Ready to create your professional avatar video"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,r.jsxs)("div",{children:["✓ Avatar: ",I.name]}),(0,r.jsxs)("div",{children:["✓ Audio: ",null==U||null==(a=U.selectedVoice)?void 0:a.name]})]})]}),(0,r.jsx)(t.$,{variant:"primary",size:"sm",className:"w-full",onClick:F,icon:(0,r.jsx)(N.A,{className:"w-3 h-3"}),children:"Generate Video"})]}):(0,r.jsx)("div",{className:"text-center space-y-3",children:(0,r.jsxs)("div",{className:"bg-gray-100 rounded-xl p-6",children:[(0,r.jsx)(N.A,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-500 text-xs",children:"Complete avatar selection and audio generation first"})]})})})]})]})]})})]})})]}):null}function V(e){let{children:s,variant:a="primary",size:i="default",className:c="",modalTitle:o="AI Video Generation Demo",showIcon:d=!0}=e,{openModal:x,closeModal:m,isModalOpen:u}=(0,n.h)(),h="generation-demo";return(0,r.jsx)(t.$,{variant:a,size:i,onClick:()=>{u(h)||x({id:h,component:(0,r.jsx)(k,{isOpen:!0,onClose:()=>m(h),title:o}),zIndex:1e3})},className:c,icon:d&&!s?(0,r.jsx)(l.A,{className:"w-4 h-4"}):void 0,children:s||"Open Video Generator"})}function G(){return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"bg-card border-b border-border",children:(0,r.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"inline-flex items-center space-x-3 bg-gradient-to-r from-purple-100 to-blue-100 rounded-full px-6 py-3 shadow-sm border border-purple-200 mb-4",children:[(0,r.jsx)(l.A,{className:"w-6 h-6 text-purple-600"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:"AI Video Generation Demo"})]}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Create Professional Avatar Videos"}),(0,r.jsx)("p",{className:"text-muted-foreground max-w-3xl mx-auto text-lg mb-8",children:"Complete video creation workflow in one place. Select an AI avatar, generate voice content, and produce high-quality videos. Click below to get started."}),(0,r.jsx)(V,{variant:"primary",size:"lg",className:"px-8 py-4 text-lg font-semibold",children:"Start Creating Videos"})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Complete AI Video Production Suite"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(l.A,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Independent Modals"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Each step opens in its own modal without nesting restrictions, allowing for full-screen experiences"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(l.A,{className:"w-8 h-8 text-purple-600"})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Seamless Workflow"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Progress through avatar selection, audio generation, and video creation with a unified interface"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(l.A,{className:"w-8 h-8 text-green-600"})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Modal Management"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Advanced modal system using React portals for proper z-index management and accessibility"})]})]}),(0,r.jsx)("div",{className:"text-center mt-12",children:(0,r.jsx)(V,{variant:"secondary",modalTitle:"AI Video Generator - Demo Mode",children:"Try the Demo"})})]})]})}},8207:(e,s,a)=>{"use strict";a.d(s,{ModalProvider:()=>c,h:()=>i});var r=a(5155),t=a(2115),l=a(7650);let n=(0,t.createContext)(void 0);function i(){let e=(0,t.useContext)(n);if(!e)throw Error("useModal must be used within a ModalProvider");return e}function c(e){let{children:s}=e,[a,l]=(0,t.useState)([]);(0,t.useEffect)(()=>(a.length>0?(document.body.classList.add("modal-open"),document.body.style.overflow="hidden"):(document.body.classList.remove("modal-open"),document.body.style.overflow="unset"),()=>{document.body.classList.remove("modal-open"),document.body.style.overflow="unset"}),[a.length]);let i=(0,t.useCallback)(e=>{l(s=>[...s.filter(s=>s.id!==e.id),e])},[]),c=(0,t.useCallback)(e=>{l(s=>s.filter(s=>s.id!==e))},[]),d=(0,t.useCallback)(()=>{l([])},[]),x=(0,t.useCallback)(e=>a.some(s=>s.id===e),[a]),m=(0,t.useCallback)(()=>a,[a]);return(0,t.useEffect)(()=>{let e=e=>{if("Escape"===e.key&&a.length>0){let e=a[a.length-1];e&&!1!==e.allowBackdropClose&&c(e.id)}};return a.length>0&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a,c]),(0,r.jsxs)(n.Provider,{value:{openModal:i,closeModal:c,closeAllModals:d,isModalOpen:x,getOpenModals:m},children:[s,(0,r.jsx)(o,{modals:a})]})}function o(e){let{modals:s}=e,a=document.body;return(0,l.createPortal)((0,r.jsx)(r.Fragment,{children:s.map((e,s)=>(0,r.jsx)("div",{style:{zIndex:e.zIndex||1e3+s},className:"modal-layer modal-enter",children:e.component},e.id))}),a)}}},e=>{var s=s=>e(e.s=s);e.O(0,[342,766,622,160,429,441,684,358],()=>s(3291)),_N_E=e.O()}]);